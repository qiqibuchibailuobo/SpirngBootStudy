<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <!-- import CSS -->
    <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
</head>
<body>
<div id="app">
    <template>
        <!--<ul>-->
            <!--<template v-for="item in list">-->
                <!--<li>{{ item.id }}</li>-->
                <!--<li>{{ item.color }}</li>-->
                <!--<li>{{ item.newDate }}</li>-->
                <!--<li class="divider" role="presentation"></li>-->
            <!--</template>-->
        <!--</ul>-->
        <el-table
                :data="list"
                style="width: 100%">
            <el-table-column
                    prop="id"
                    label="id"
                    width="180">
                <!--{{list.id}}-->
            </el-table-column>
            <el-table-column
                    prop="color"
                    label="颜色"
                    width="180">
                <!--{{list.color}}-->
            </el-table-column>
            <el-table-column
                    prop="newdate"
                    label="日期"
                    width="180">
                <!--{{list.newDate}}-->
            </el-table-column>
        </el-table>
    </template>

    <el-upload
            class="upload-demo"
            name="uploadFile"
            action="https://localhost:8080/upload"
            :on-preview="handlePreview"
            :on-remove="handleRemove"
            :on-success="successRes"
            :before-remove="beforeRemove"
            multiple
            :limit="3"
            :on-exceed="handleExceed"
            :file-list="fileList">
        <el-button size="small" type="primary">点击上传</el-button>
        <div slot="tip" class="el-upload__tip">只能上传jpg/png文件，且不超过500kb</div>
    </el-upload>
    <el-upload
            class="upload-demo"
            name="uploadFile"
            drag
            action="https://localhost:8080/upload/"
            multiple>
        <i class="el-icon-upload"></i>
        <div class="el-upload__text">将文件拖到此处，或<em>点击上传</em></div>
        <div class="el-upload__tip" slot="tip">只能上传jpg/png文件，且不超过500kb</div>
    </el-upload>
</div>
<form action="/upload" method="post" enctype="multipart/form-data">
    <input type="file" name="uploadFile" value="请选择上传文件">
    <input type="submit" value="保存">
</form>
</body>
<!-- import Vue before Element -->
<script src="https://unpkg.com/vue/dist/vue.js"></script>
<script src="https://cdn.bootcdn.net/ajax/libs/vue/3.0.7/vue.cjs.js"></script>
<!-- import JavaScript -->
<script src="https://unpkg.com/element-ui/lib/index.js"></script>
<script src="https://cdn.bootcdn.net/ajax/libs/vue-resource/1.5.2/vue-resource.js"></script>
<script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.6.0/jquery.js"></script>
<script>
    new Vue({
        el: '#app',
        data: {

            list: [],
            fileList: [{name: 'food.jpeg', url: 'https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100'}, {name: 'food2.jpeg', url: 'https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100'}],
            file:{}
        },
        //vue对象实例创建成功之后就会自动调用这个方法
        //如果你想写的方法在舒适化的时候就被调用的话就要要用到created这个
        created: function () {
            this.getlist();//这里定义这个方法，vue实例之后运行到这里就调用这个函数

        },
        methods: {
            handleRemove(file, fileList) {
                console.log(file, fileList);
            },
            handlePreview(file) {
                console.log(file);
            },
            handleExceed(files, fileList) {
                this.$message.warning(`当前限制选择 3 个文件，本次选择了 ${files.length} 个文件，共选择了 ${files.length + fileList.length} 个文件`);
            },
            beforeRemove(file, fileList) {
                return this.$confirm(`确定移除 ${ file.name }？`);
            },
            successRes(response, file, fileList) { //文件上传成功之后

                this.$message({
                    message: response,
                    type: 'success'
                });
            },
            async getlist () {
                //请求服务器的api获取到品牌的数据列表
                this.$http.get('/rest/cars').then((r)=> {
                    // alert(r.body.message);
                    //console.log(r.data);


                    this.list = r.data.data;
                    // this.list = JSON.stringify(this.list);
                    // this.list = JSON.parse(this.list);
                    // console.log(this.list);
                    // for (var i = 0; i <this.list.length; i++) {
                    //     // this.list.newDate = this.list.newDate.replace(/-/g,':').replace(' ',':')
                    //     console.log(this.list[i].newdate);
                    //
                    // }
                    return;


                });
            }

        }
    });
</script>
</html>